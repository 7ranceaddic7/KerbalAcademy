    CONTRACT_TYPE
    {
        name = KerbalAcademyAdvancedPiloting
        title = Kerbal Academy: Advanced Piloting
		group = KerbalAcademy
        description = It seems that @/trainee is ready to improve their piloting skills. Fly the course and they will advance a level.
        synopsis = Complete the training course with @/trainee.
        completedMessage = Congratulations, @/trainee is feeling more experienced already.
        //commented out for now. Add agent later. agent = Kerbal Academy
		notes = The parameters must be completed in order.
        minExpiry = 1
        maxExpiry = 7
        cancellable = true
        declinable = true
        prestige = Significant
        targetBody = Kerbin
        rewardScience = 0.0
        rewardReputation = 0.0
        rewardFunds = 0
        failureReputation = 0
        failureFunds = 0
        advanceFunds = -100000
		weight = 10

		DATA
		{
			type = Kerbal
			uniquenessCheck = GROUP_ACTIVE
			trainee = AllKerbals().Where(m => m.ExperienceTrait() == "Pilot" && m.Type() == Crew && m.RosterStatus() == Available && m.ExperienceLevel()<4 && m.ExperienceLevel()>0).Random()
		}

		DATA
		{
			type = List<Kerbal>
			requiredValue = false
			mentorList = AllKerbals().Where(m => m.ExperienceTrait() == "Pilot" && m.Type() == Crew && m.ExperienceLevel() > @/mentorLevel)
		}

		DATA
		{
			type = double
			newLevel = @/trainee.ExperienceLevel()+1
			expAward = @newLevel == 4 ? 16 : @newLevel == 3 ? 8 : @newLevel == 2 ? 6 : 2
			mentorLevel = @/trainee.ExperienceLevel()+1
		}
		

		BEHAVIOUR
		{
			name = AwardExperience
			type = AwardExperience
			kerbal = @/trainee
			experience = @/expAward
		}

	
	PARAMETER
	{	
		name = HasCrew
		type = HasCrew
		kerbal = @/trainee
	}


	PARAMETER
	{
    name = Orbit
    type = Orbit
	targetBody = Kerbin
	maxInclination = 5
	title = Reach an equatorial orbit.
	}

		PARAMETER
	{
    name = Orbit
    type = Orbit
	targetBody = Kerbin
	completeInSequence = true
	minInclination = 45
	title = Move to an inclined orbit by burning normal/anti-normal.
	
	REQUIREMENT
	{
		name = Expression
		type = Expression
		expression = (@/newLevel == 2)
	}
	}

	PARAMETER
	{
    name = ReachState
    type = ReachState
	situation = ESCAPING
	targetBody = Mun
	title = Perform a flyby of Mun
	
	REQUIREMENT
	{
		name = Expression
		type = Expression
		expression = (@/newLevel > 2)
	}

	REQUIREMENT
	{
		name = Facility
		type = Facility
		facility = TrackingStation
		minLevel = 2
	}
	}

	PARAMETER
	{
		name = RecoverKerbal
		type = RecoverKerbal
		completeInSequence = true
		kerbal = @/trainee
	}
	

	REQUIREMENT
	{
		name = Expression
		type = Expression
		expression = (@/trainee.RosterStatus() == Available && @/mentorList.Count() == 0)
	}
}

	
		
		

		