    CONTRACT_TYPE
    {
        name = KerbalAcademyEngineeringSchool
        title = Kerbal Academy: EngineeringSchool
		group = KerbalAcademy
        description = @/simLevel <4 ? @/repairString : @/tourString
        synopsis = Complete the training course with @/trainee.
        completedMessage = Congratulations, @/trainee is feeling more experienced already.
		notes = @/simLevel <4 ? This is just a simulation. The malfunctioning part will appear to be working. : 
        //commented out for now. Add agent later. agent = Kerbal Academy
        minExpiry = 1
        maxExpiry = 7
        cancellable = true
        declinable = true
        prestige = Significant
        targetBody = @/homeworld
        rewardScience = 0.0
        rewardReputation = 0.0
        rewardFunds = 0
        failureReputation = 0
        failureFunds = 0
        advanceFunds = -100000
		weight = 10

		DATA
		{
			type = Kerbal
			uniquenessCheck = GROUP_ACTIVE
			trainee = AllKerbals().Where(m => m.ExperienceTrait() == "Engineer" && m.Type() == Crew && m.RosterStatus() == Available && m.ExperienceLevel()>0).Random()
		}

		DATA
		{
			type = CelestialBody
			homeworld = HomeWorld()
		}

		DATA
		{
			type = List<Kerbal>
			requiredValue = false
			aliveKerbals = AllKerbals().Where(a => a.RosterStatus() == Available || a.RosterStatus() == Assigned)
			mentorList = @aliveKerbals.Where(m => m.ExperienceTrait() == "Engineer" && m.Type() == Crew && m.ExperienceLevel() > @/mentorLevel)
		}

		DATA
		{
			type = double
			newLevel = @/trainee.ExperienceLevel()+1
			expAward = @newLevel == 5 ? 32 : @newLevel == 4 ? 16 : @newLevel == 3 ? 8 : @newLevel == 2 ? 6 : 2
			mentorLevel = @/trainee.ExperienceLevel()+1
		}

		DATA
		{
		type = string
		requiredValue = false
		broken = @/simLevel == 2 ? landing legs : wheels
		repairString = @/trainee is ready to improve their skills. Help them repair the @/broken on @/craft and they will advance a level.
		tourString = @/trainee is ready to improve their skills. Give them a tour on board @/craft and they will advance a level.
		}

		DATA
		{
			type = List<Vessel>
			requiredValue = false
			l2Craft = AllVessels().Where(v => v.VesselType() == Lander)
			l3Craft == AllVessels().Where(v => v.VesselType() == Rover)
			l4Craft == AllVessels().Where(v => v.VesselType() == Station)
			l5Craft == AllVessels().Where(v => v.VesselType() == Base && v.CelestialBody() != @/homeworld)
		}

		DATA
		{
			type = Vessel
			craft = @/simLevel == 5 ? @/l5Craft.Random() : @/simLevel == 4 ? @/l4Craft.Random() : @/simLevel == 3 ? @/l3Craft.Random() : @/l2Craft.Random
		}
		

		BEHAVIOUR
		{
			name = AwardExperience
			type = AwardExperience
			kerbal = @/trainee
			experience = @/expAward
		}

	PARAMETER
	{
		name = FirstCheck
		type = All
		title = Bring @/trainee to @/craft
		hideChildren == true
			
			PARAMETER
			{
				name = Rendevouz
				type = Rendevouz
			}
	
			PARAMETER
			{	
				name = HasCrew
				type = HasCrew
				kerbal = @/trainee
			}
	}

	PARAMETER
	{
		name = Repair
		type = All
		hideChildren = true
		completeInSequence = true
		title = Go on EVA to repair the @/broken
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			kerbal = @/trainee
		}

				PARAMETER
		{
			name = VesselIsType
			type = VesselIsType
			vesselType = EVA
		}

		REQUIREMENT
		{
		name = Expression
		type = Expression
		expression = (@/simLevel <4)
		}
	}

		PARAMETER
	{
		name = Tour
		type = VesselParameterGroup
		vessel = @/craft
		hideChildren = true
		completeInSequence = true
		title = Do a 30 day tour on @/craft
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			kerbal = @/trainee
		}

		REQUIREMENT
		{
		name = Expression
		type = Expression
		expression = (@/simLevel >3)
		}
	}

	PARAMETER
	{
		name = RepairTimer
		type = Duration
		duration = 2m
		preWaitText = Repair Pending
		waitingText = Repair in Progress
		completionText = Repair Complete
		startCriteria = PARAMETER_COMPLETION
		parameter = Repair
		
		REQUIREMENT
		{
			name = Expression
			type = Expression
			expression = (@/simLevel <4)
		}
	}

		PARAMETER
	{
		name = TourTimer
		type = Duration
		duration = 2m
		preWaitText = Waiting for tour to start
		waitingText = Doing tour of @/craft
		completionText = Tour finished!
		startCriteria = PARAMETER_COMPLETION
		parameter = Tour
		
		REQUIREMENT
		{
			name = Expression
			type = Expression
			expression = (@/simLevel >3)
		}
	}

	PARAMETER
	{
		name = RecoverKerbal
		type = RecoverKerbal
		completeInSequence = true
		kerbal = @/trainee
	}
	

	REQUIREMENT
	{
		name = Expression
		type = Expression
		expression = (@/trainee.RosterStatus() == Available && @/mentorList.Count() == 0)
	}
}

	
		
		

		