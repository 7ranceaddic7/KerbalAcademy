    CONTRACT_TYPE
    {
        name = KerbalAcademyEngineering101
        title = Kerbal Academy: Engineering 101
		group = KerbalAcademy
        description = Looks like @/trainee doesn't know a hammer from a socket wrench. Good job @/mentor is on hand to help.
        synopsis = Take @/trainee and @/mentor on a training exercise
        completedMessage = Perfect. @/trainee can feel the benefit of @/mentor and their experience already.
        //commented out for now. Add agent later. agent = Kerbal Academy
        minExpiry = 1
        maxExpiry = 7
        cancellable = true
        declinable = true
        prestige = Significant
        targetBody = Kerbin
        rewardScience = 0.0
        rewardReputation = 0.0
        rewardFunds = 0
        failureReputation = 0
        failureFunds = 0
        advanceFunds = @/trainingCost
		weight = 10
		
		DATA
		{
			type = Kerbal
			uniquenessCheck = GROUP_ACTIVE
			mentor = AllKerbals().Where(m => m.ExperienceTrait() == "Engineer" && m.ExperienceLevel()>=2 && m.Type() == Crew && m.RosterStatus() == Available).Random()
			trainee = AllKerbals().Where(m => m.ExperienceTrait() == "Engineer" && m.ExperienceLevel()<= @/minExperience && m.Type() == Crew && m.RosterStatus() == Available).Random()
		}

		DATA
		{
			type = double
			levelGain = @/mentor.ExperienceLevel() - @/trainee.ExperienceLevel()-1
			newLevel = @/mentor.ExperienceLevel()-1
			trainingCost = @levelGain*-100000
			expAward = @newLevel == 4 ? 16 : @newLevel == 3 ? 8 : @newLevel == 2 ? 6 : 2
			minExperience = @/mentor.ExperienceLevel()-2
			simLevel = Random((@/trainee.ExperienceLevel()+1), @newLevel)
			simTime = Random(60, @simLevel*100)
		}

		BEHAVIOUR
		{
			name = AwardExperience
			type = AwardExperience
			kerbal = @/trainee
			experience = @/expAward
		}
	PARAMETER
	{
	name = FirstCheck
	type = All
	hideChildren = true
	title = Take @/mentor and @/trainee out in a craft which contains a parachute.
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			kerbal = @/mentor	
			kerbal = @/trainee
		}

		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			partModule = ModuleParachute
		}
		REQUIREMENT
			{
				name = Expression
				type = Expression
				expression = @/simLevel == 1
			}
	}
	
	PARAMETER
	{
	name = FirstCheck
	type = All
	title = Take @/mentor and @/trainee out in a craft which contains wheels or landing legs.
	hideChildren = true
			PARAMETER
		{
			name = HasCrew
			type = HasCrew
			kerbal = @/mentor	
			kerbal = @/trainee
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			partModule = ModuleWheelBase
		}
		REQUIREMENT
		{
			name = Expression
			type = Expression
			expression = @/simLevel >= 2
		}
	}
	
	PARAMETER
	{
		name = EVASim
		type = All
		completeInSequence = true
		hideChildren = true
		title = Take @/trainee on EVA to perform the simulation.
		
		PARAMETER
		{
			name = VesselIsType
			type = VesselIsType
			vesselType = EVA
		}

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			kerbal = @/trainee
		}
	}

	PARAMETER
	{
		name = Duration
		type = Duration
		duration = @/simTime
		preWaitText = Waiting for simulation parameters to be fulfilled.
		waitingText = Running Simulation
		completionText = Simulation Complete
		startCriteria = PARAMETER_COMPLETION
		parameter = EVASim
	}

	REQUIREMENT
	{
		name = Expression
		type = Expression
		expression = (@/mentor.RosterStatus() == Available && @/trainee.RosterStatus() == Available && @/trainee.ExperienceLevel()<@/minExperience)
	}
}

	
		
		

		